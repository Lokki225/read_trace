{
  "version": 3,
  "sources": ["../src/extension/popup-entry.ts"],
  "sourcesContent": ["// Simple popup entry point that doesn't require React\ninterface PopupState {\n  isOnline: boolean;\n  lastUpdate: string | null;\n  seriesTitle: string | null;\n  chapterNumber: number | null;\n  scrollPosition: number;\n  isSyncing: boolean;\n  syncError: string | null;\n}\n\nfunction initPopup() {\n  const root = document.getElementById('root');\n  if (!root) return;\n\n  const initialState: PopupState = {\n    isOnline: true,\n    lastUpdate: null,\n    seriesTitle: null,\n    chapterNumber: null,\n    scrollPosition: 0,\n    isSyncing: false,\n    syncError: null,\n  };\n\n  function render(state: PopupState) {\n    root.innerHTML = `\n      <div style=\"width: 380px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #ffffff; color: #1f2937; padding: 0; margin: 0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\">\n        <!-- Header -->\n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid #e5e7eb; background: #f9fafb;\">\n          <div style=\"font-size: 18px; font-weight: 700; color: #ff7a45;\">\uD83D\uDCD6 ReadTrace</div>\n          <div style=\"padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #ffffff; background: ${state.isOnline ? '#10b981' : '#ef4444'};\">\n            ${state.isOnline ? '\uD83D\uDFE2 Online' : '\uD83D\uDD34 Offline'}\n          </div>\n        </div>\n\n        <!-- Currently Reading -->\n        <div style=\"padding: 16px; border-bottom: 1px solid #e5e7eb;\">\n          <div style=\"font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px;\">Currently Reading</div>\n          ${state.seriesTitle ? `\n            <div style=\"display: flex; flex-direction: column; gap: 8px;\">\n              <div style=\"font-size: 16px; font-weight: 600; color: #1f2937; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">${state.seriesTitle}</div>\n              <div style=\"font-size: 14px; color: #6b7280;\">Chapter ${state.chapterNumber}</div>\n              <div style=\"width: 100%; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden;\">\n                <div style=\"height: 100%; background: #ff7a45; width: ${state.scrollPosition}%; transition: width 0.3s ease;\"></div>\n              </div>\n              <div style=\"font-size: 12px; color: #9ca3af; text-align: right;\">${Math.round(state.scrollPosition)}% scrolled</div>\n            </div>\n          ` : `\n            <div style=\"font-size: 13px; color: #9ca3af; text-align: center; padding: 20px 0; line-height: 1.5;\">\n              No reading progress detected.<br/>Open a manga/webtoon page to start tracking.\n            </div>\n          `}\n        </div>\n\n        <!-- Sync Status -->\n        <div style=\"padding: 16px; border-bottom: 1px solid #e5e7eb;\">\n          <div style=\"font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px;\">Sync Status</div>\n          ${state.isSyncing ? `\n            <div style=\"display: flex; align-items: center; gap: 8px; font-size: 13px; color: #3b82f6;\">\n              <span style=\"display: inline-block; animation: spin 1s linear infinite; font-size: 16px;\">\u27F3</span> Syncing...\n            </div>\n          ` : state.syncError ? `\n            <div style=\"font-size: 13px; color: #ef4444; padding: 8px; background: #fee2e2; border-radius: 4px;\">\n              \u26A0\uFE0F Sync failed: ${state.syncError}\n            </div>\n          ` : state.lastUpdate ? `\n            <div style=\"font-size: 13px; color: #10b981; padding: 8px; background: #ecfdf5; border-radius: 4px;\">\n              \u2713 Last synced: ${state.lastUpdate}\n            </div>\n          ` : `\n            <div style=\"font-size: 13px; color: #f59e0b; padding: 8px; background: #fffbeb; border-radius: 4px;\">\n              \u25D0 Waiting for first sync...\n            </div>\n          `}\n        </div>\n\n        <!-- Actions -->\n        <div style=\"display: flex; gap: 8px; padding: 16px; border-bottom: 1px solid #e5e7eb;\">\n          <button id=\"syncBtn\" style=\"flex: 1; padding: 10px 12px; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; background: #ff7a45; color: #ffffff; transition: all 0.2s ease; opacity: ${state.isSyncing ? 0.6 : 1};\" ${state.isSyncing ? 'disabled' : ''}>\n            ${state.isSyncing ? 'Syncing...' : 'Sync Now'}\n          </button>\n          <button id=\"dashboardBtn\" style=\"flex: 1; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; background: #f3f4f6; color: #1f2937; transition: all 0.2s ease;\">\n            Dashboard\n          </button>\n        </div>\n\n        <!-- Footer -->\n        <div style=\"padding: 12px 16px; background: #f9fafb; font-size: 11px; color: #9ca3af; display: flex; justify-content: space-between; align-items: center;\">\n          <div>Tracking: MangaDex, Webtoon</div>\n          <div>v1.0.0</div>\n        </div>\n      </div>\n\n      <style>\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n      </style>\n    `;\n\n    // Attach event listeners\n    const syncBtn = document.getElementById('syncBtn');\n    const dashboardBtn = document.getElementById('dashboardBtn');\n\n    if (syncBtn) {\n      syncBtn.addEventListener('click', () => {\n        (chrome as any).runtime.sendMessage(\n          { type: 'MANUAL_SYNC' },\n          (response: { success: boolean; error?: string }) => {\n            const newState = { ...state, isSyncing: false, syncError: response.error || null };\n            render(newState);\n          }\n        );\n      });\n    }\n\n    if (dashboardBtn) {\n      dashboardBtn.addEventListener('click', () => {\n        (chrome as any).tabs.create({ url: 'https://readtrace.local/dashboard' });\n      });\n    }\n  }\n\n  render(initialState);\n\n  // Update state every second\n  setInterval(() => {\n    (chrome as any).runtime.sendMessage(\n      { type: 'GET_POPUP_STATE' },\n      (response: PopupState) => {\n        if (response) {\n          render(response);\n        }\n      }\n    );\n  }, 1000);\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initPopup);\n} else {\n  initPopup();\n}\n"],
  "mappings": ";;;AAWA,WAAS,YAAY;AACnB,UAAM,OAAO,SAAS,eAAe,MAAM;AAC3C,QAAI,CAAC,KAAM;AAEX,UAAM,eAA2B;AAAA,MAC/B,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,WAAW;AAAA,IACb;AAEA,aAAS,OAAO,OAAmB;AACjC,WAAK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,+HAK0G,MAAM,WAAW,YAAY,SAAS;AAAA,cACvJ,MAAM,WAAW,qBAAc,mBAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAO7C,MAAM,cAAc;AAAA;AAAA,gJAEgH,MAAM,WAAW;AAAA,sEAC3F,MAAM,aAAa;AAAA;AAAA,wEAEjB,MAAM,cAAc;AAAA;AAAA,iFAEX,KAAK,MAAM,MAAM,cAAc,CAAC;AAAA;AAAA,cAEnG;AAAA;AAAA;AAAA;AAAA,WAIH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAMC,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,cAIhB,MAAM,YAAY;AAAA;AAAA,0CAEA,MAAM,SAAS;AAAA;AAAA,cAEjC,MAAM,aAAa;AAAA;AAAA,oCAEF,MAAM,UAAU;AAAA;AAAA,cAEjC;AAAA;AAAA;AAAA;AAAA,WAIH;AAAA;AAAA;AAAA;AAAA;AAAA,oOAKyN,MAAM,YAAY,MAAM,CAAC,MAAM,MAAM,YAAY,aAAa,EAAE;AAAA,cACtR,MAAM,YAAY,eAAe,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBrD,YAAM,UAAU,SAAS,eAAe,SAAS;AACjD,YAAM,eAAe,SAAS,eAAe,cAAc;AAE3D,UAAI,SAAS;AACX,gBAAQ,iBAAiB,SAAS,MAAM;AACtC,UAAC,OAAe,QAAQ;AAAA,YACtB,EAAE,MAAM,cAAc;AAAA,YACtB,CAAC,aAAmD;AAClD,oBAAM,WAAW,EAAE,GAAG,OAAO,WAAW,OAAO,WAAW,SAAS,SAAS,KAAK;AACjF,qBAAO,QAAQ;AAAA,YACjB;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AAEA,UAAI,cAAc;AAChB,qBAAa,iBAAiB,SAAS,MAAM;AAC3C,UAAC,OAAe,KAAK,OAAO,EAAE,KAAK,oCAAoC,CAAC;AAAA,QAC1E,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO,YAAY;AAGnB,gBAAY,MAAM;AAChB,MAAC,OAAe,QAAQ;AAAA,QACtB,EAAE,MAAM,kBAAkB;AAAA,QAC1B,CAAC,aAAyB;AACxB,cAAI,UAAU;AACZ,mBAAO,QAAQ;AAAA,UACjB;AAAA,QACF;AAAA,MACF;AAAA,IACF,GAAG,GAAI;AAAA,EACT;AAEA,MAAI,SAAS,eAAe,WAAW;AACrC,aAAS,iBAAiB,oBAAoB,SAAS;AAAA,EACzD,OAAO;AACL,cAAU;AAAA,EACZ;",
  "names": []
}
